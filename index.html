<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
  <meta name="author" content="Y&Z Studio - Powered by AI & Human Creativity">
<meta name="copyright" content="¬© 2025 Y&Z Studio - yudabastard84@gmail.com">
	<!-- Meta dasar -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="theme-color" content="#1e1e1e"> <!-- Warna status bar -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="My Audio App">

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json" />
<link rel="icon" type="image/png" sizes="192x192" href="192.png" />
<link rel="apple-touch-icon" href="192.png" />

<!-- SEO -->
<title>My Audio App - Music & Sound Offline</title>
<meta name="description" content="Play your favorite audio files offline with rich EQ and player features.">

<!-- OG (untuk share) -->
<meta property="og:title" content="My Audio App">
<meta property="og:description" content="A fast, offline-ready audio player PWA. Try now!">
<meta property="og:image" content="icon-512.png">
<meta property="og:type" content="website">
<meta property="og:url" content="https://yoursite.com/">

<!-- Optional favicon -->
<link rel="shortcut icon" href="icon-192.png" type="image/png">
  <title> Audio Player Final</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
    }

    #bgVideo, #bgImage {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    #tapArea {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 10;
    }

    #miniPlayer, #extMiniPlayer {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #0008;
      border-radius: 12px;
      padding: 10px;
      display: none;
      z-index: 9999;
      transition: all 0.3s ease;
    }

    #extMiniPlayer {
      padding: 6px 10px;
    }

    #extMiniPlayer:hover::after {
      content: "üéµ Mini Player (Klik untuk buka)";
      color: white;
      font-size: 14px;
      margin-left: 10px;
    }

    #player {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #222c;
      padding: 20px;
      border-radius: 16px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    button {
      padding: 8px 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #fileInput {
      display: none;
    }
    
  .eq-wrapper {  
    display: flex;  
    flex-direction: column;  
    align-items: center;  
    padding: 12px;  
    width: 92vw;  
    max-width: 360px;  
    position: fixed;  
    top: 20px;  
    right: 15px;  
    background: transparent;  
    z-index: 9999;  
  }  
  
  .eq-header {  
    display: flex;  
    justify-content: space-between;  
    align-items: center;  
    width: 100%;  
    color: #fff;  
  }  
  
  .eq-container {  
    display: flex;  
    gap: 1px;  
    margin-top: 10px;  
    transition: max-height 0.3s ease;  
  }  
  
  .eq-sliders {  
    display: flex;  
    gap: 8px;  
    padding: 12px 0;  
    justify-content: center;  
    flex-direction: column;  
    align-items: center;  
    width: 28px;  
    position: relative;  
  }  
  
  .slider-wrapper {  
    position: relative;  
    height: 140px;  
    width: 20px;  
    background: none;  
  }  
  
  .slider-wrapper::before {  
    content: '';  
    position: absolute;  
    top: 8px;  
    bottom: 8px;  
    left: 50%;  
    width: 2px;  
    background: linear-gradient(to bottom, #666, #aaa, #666);  
    transform: translateX(-50%);  
  }  
  
  .slider-lines {  
    position: absolute;  
    width: 100%;  
    height: 100%;  
    display: flex;  
    flex-direction: column;  
    justify-content: space-between;  
  }  
  
  .slider-lines span {  
    height: 1px;  
    background: #444;  
    opacity: 0.6;  
  }  
  
  .slider {  
    position: absolute;  
    width: 140px;  
    height: 20px;  
    transform: rotate(270deg);  
    top: 50%;  
    left: 50%;  
    translate: -50% -50%;  
    background: transparent;  
    appearance: none;  
    z-index: 2;  
  }  
  
  .slider::-webkit-slider-thumb {  
    appearance: none;  
    width: 10px;  
    height: 10px;  
    background: #ccc;  
    border: 1px solid #777;  
    box-shadow: 0 1px 2px #000a;  
    cursor: pointer;  
  }  
  
  .slider::-moz-range-thumb {  
    width: 10px;  
    height: 10px;  
    background: #ccc;  
    border: 1px solid #777;  
    box-shadow: 0 1px 2px #000a;  
    cursor: pointer;  
  }  
  
  .freq-label {  
    margin-top: 5px;  
    font-size: 6px;  
    color: #ffffff;  
    text-align: center;  
  }  
  
  .minimized {  
    display: none !important;  
  }  
  
  #eqToggleBtn {  
    background: none;  
    border: none;  
    color: #0ff;  
    font-size: 18px;  
    cursor: pointer;  
  }  

@media (max-width: 600px) {
  #eqPanel {
    width: 90vw;
    left: 5vw;
  }
}

#eqPresetDropdown {
  position: relative;
  z-index: 999999 !important;
  pointer-events: auto !important;
}
  
  </style>
</head>
<body onclick="enterFullscreenOnce()">

  <!-- Background video/image -->
  <video id="bgVideo" autoplay muted loop></video>
  <img id="bgImage" style="display:none" />

  <!-- Tap area -->
  <div id="tapArea"></div>
  
<div class="eq-wrapper" id="eqWrapper">  
  <div class="eq-header">  
    <h4>üéöÔ∏è Equalizer</h4>  
    <button id="eqToggleBtn">‚àí</button>  
  </div>  
  <div class="eq-container" id="eqContainer"></div>  
</div>  

<select id="eqPresetDropdown">
      <option value="Flat">Flat</option>  
      <option value="Bass Boost">Bass</option>  
      <option value="Treble Boost">Treble</option>  
      <option value="Rock">Rock</option>  
      <option value="Pop">Pop</option>  
      <option value="Jazz">Jazz</option>  
       <option value="Classic">Classic</option>  
      <option value="Dance">Dance</option>  
</select>


  <!-- Player Full -->
  <div id="player">
    <audio id="audio" controls></audio>
    <button onclick="minimizePlayer()">Minimize</button>
    <button onclick="extMinimize()">Extreme Minimize</button>
  </div>

  <!-- Mini Player -->
  <div id="miniPlayer">
    <button onclick="playAudio()">‚ñ∂Ô∏è</button>
    <button onclick="maximizePlayer()">üîº</button>
  </div>

  <!-- Extreme Mini -->
  <div id="extMiniPlayer" onclick="maximizePlayer()">‚ñ∂Ô∏è</div>

  <!-- File input -->
  <input type="file" id="fileInput" accept="audio/*,video/*,image/*" />

  <script>
    const tapArea = document.getElementById("tapArea");
    const fileInput = document.getElementById("fileInput");
    const bgVideo = document.getElementById("bgVideo");
    const bgImage = document.getElementById("bgImage");
    const audio = document.getElementById("audio");
  
  const eqContainer = document.getElementById("eqContainer");  
  const eqToggleBtn = document.getElementById("eqToggleBtn");  
  
    const eqFrequencies = [10, 32, 64, 125, 250, 500, 1000, 2000, 4000, 10000, 16000, 20000];
  
  function createEQSliders() {  
    if (!eqContainer) return;  
  
    eqContainer.innerHTML = ""; // Clear existing sliders  
    eqContainer.style.display = "flex";  
  
    eqFrequencies.forEach(freq => {  
      const sliderDiv = document.createElement("div");  
      sliderDiv.className = "eq-sliders";  
  
      const wrapper = document.createElement("div");  
      wrapper.className = "slider-wrapper";  
  
      const lines = document.createElement("div");  
      lines.className = "slider-lines";  
      for (let i = 0; i < 5; i++) {  
        lines.appendChild(document.createElement("span"));  
      }  
  
const slider = document.createElement("input");
slider.type = "range";
slider.min = 0;
slider.max = 100;
slider.value = 50;
slider.className = "slider";
slider.id = `eq-slider-${eqFrequencies.indexOf(freq)}`; // ‚¨ÖÔ∏è Tambahkan ini
  
      slider.addEventListener("input", () => {  
        const val = parseInt(slider.value);  
        const db = (val - 50) / 5;  
        console.log(`Freq: ${freq} Hz, Gain: ${db} dB`);  
        // if (eqNodes[i]) eqNodes[i].gain.value = db;  
      });  
  
      wrapper.appendChild(lines);  
      wrapper.appendChild(slider);  
  
      const label = document.createElement("div");  
      label.className = "freq-label";  
      label.innerText = freq >= 1000 ? `${freq / 1000}kHz` : `${freq}Hz`;  
  
      sliderDiv.appendChild(wrapper);  
      sliderDiv.appendChild(label);  
      eqContainer.appendChild(sliderDiv);  
    });  
  }  
  
  eqToggleBtn.addEventListener("click", () => {  
    eqContainer.classList.toggle("minimized");  
    eqToggleBtn.textContent = eqContainer.classList.contains("minimized") ? "+" : "‚àí";  
  });  
  
  createEQSliders();  
    
// === SETUP AUDIO CONTEXT ===
const audioElement = document.getElementById("audio");
const presetSelect = document.getElementById("eqPresetDropdown");

let audioCtx, sourceNode, gainNode, eqNodes = [], compressor;
let isInitialized = false;

let bands = [10, 32, 64, 125, 250, 500, 1000, 2000, 4000, 10000, 16000, 20000];
const eqPresets = {
  "Flat":  {
    eq: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    enhancer: { presence: 0, brilliance: 0, warmth: 0 },
    compressor: { threshold: -12, ratio: 2, attack: 0.003, release: 0.25 },
    limiter: { threshold: -3, ratio: 10, attack: 0.002, release: 0.1 },
    stereoWidth: 1,
    reverb: 0
  },
  "Bass Boost":  {
    eq: [5, 4, 3, 1, 0, -1, -2, -2, -3, -3, -4, -5],
    enhancer: { presence: 0.2, brilliance: 0.1, warmth: 0.5 },
    compressor: { threshold: -10, ratio: 3, attack: 0.004, release: 0.3 },
    limiter: { threshold: -2, ratio: 8, attack: 0.003, release: 0.2 },
    stereoWidth: 1.1,
    reverb: 0.1
  },
  "Treble Boost": {
    eq: [-3, -2, -2, -1, 0, 1, 2, 3, 4, 5, 5, 6],
    enhancer: { presence: 0.3, brilliance: 0.6, warmth: 0.1 },
    compressor: { threshold: -11, ratio: 2.8, attack: 0.0025, release: 0.22 },
    limiter: { threshold: -2.5, ratio: 9, attack: 0.002, release: 0.1 },
    stereoWidth: 1.05,
    reverb: 0.05
  },
"Rock": {
  eq: [4.2, 4.0, 3.6, 2.2, 0.3, -1.0, 1.0, 2.6, 3.9, 4.5, 4.2, 3.2],
  enhancer: { presence: 0.85, brilliance: 0.55, warmth: 0.5 },
  compressor: { threshold: -11, ratio: 4.0, attack: 4, release: 68 },
  limiter: { threshold: -3.5, ratio: 10.5, attack: 0.003, release: 0.11 },
  stereoWidth: 1.3,
  reverb: 0.21
},
"Pop": {
  eq: [2.5, 2.2, 1.8, 0.8, 0, -0.8, 0.2, 1.2, 2.0, 2.5, 2.2, 1.8],
  enhancer:   { presence: 0.5, brilliance: 0.3, warmth: 0.6 },
  compressor: { threshold: -15, ratio: 2.8, attack: 5, release: 70 },
  limiter:    { threshold: -6,  ratio: 7, attack: 0.005, release: 0.17 },
  stereoWidth: 1.0,
  reverb: 0.22
},
"Jazz": {
  eq: [1.5, 1.2, 1, 0.5, 0.2, 0, 0.3, 0.5, 1, 1.3, 1.1, 1],
  enhancer: { presence: 0.4, brilliance: 0.2, warmth: 0.5 },
  compressor: { threshold: -18, ratio: 2, attack: 12, release: 120 },
  limiter:    { threshold: -7, ratio: 4, attack: 0.008, release: 0.3 },
  stereoWidth: 1.0,
  reverb: 0.15
},
"Classic": {
  eq: [1.2, 1, 0.8, 0.5, 0, -0.5, -0.8, 0.3, 0.6, 1.1, 1, 0.8],
  enhancer: {
    presence: 0.15,
    brilliance: 0.2,
    warmth: 0.7
  },
  compressor: {
    threshold: -18,
    ratio: 2.2,
    attack: 15,
    release: 180
  },
  limiter: {
    threshold: -8,
    ratio: 4,
    attack: 0.005,
    release: 0.35
  },
  stereoWidth: 0.95,   // Sedikit lebih sempit biar fokus ke tengah
  reverb: 0.6           // Lebih besar, biar ambience ruangan terasa
},
"Dance":  {
  eq: [4.5, 3.5, 2.5, 1.5, 0, -1, 0.5, 1.5, 3, 4, 3.5, 2.5],
  enhancer: {
    presence: 0.7,
    brilliance: 0.5,
    warmth: 0.6
  },
  compressor: {
    threshold: -11,
    ratio: 3.5,
    attack: 4,
    release: 80
  },
  limiter: {
    threshold: -5,
    ratio: 9,
    attack: 0.004,
    release: 0.15
  },
  stereoWidth: 1.15,
  reverb: 0.08
},
  "Volume++": {
    eq: [2, 1.5, 1.2, 0.8, 0, 1, 1.8, 2.2, 2.8, 3.5, 3, 2],
  enhancer: {
    presence: 2,
    brilliance: 3,
  warmth: 1.5
  },
    compressor: -13.5,
    limiter: {
      enabled: true,
      threshold: -2.8
    },
    stereoWidth: 1.08,
    reverb: {
      enabled: false
    },
    filters: (ctx) => {
      const lowShelf = ctx.createBiquadFilter();
      lowShelf.type = "lowshelf";
      lowShelf.frequency.value = 55;
      lowShelf.gain.value = 0.3; // Halusin bass lebih soft

      const subDip = ctx.createBiquadFilter();
      subDip.type = "peaking";
      subDip.frequency.value = 90;
      subDip.Q.value = 1.2;
      subDip.gain.value = -1.5; // Tambah dip-nya

      const lowMidCut = ctx.createBiquadFilter();
      lowMidCut.type = "peaking";
      lowMidCut.frequency.value = 280; // Dari 320 ‚Üí 280
      lowMidCut.Q.value = 1.2;          // Sedikit lebih sempit
      lowMidCut.gain.value = -1.6;      // Cut lebih dalam

      const midBody = ctx.createBiquadFilter();
      midBody.type = "peaking";
      midBody.frequency.value = 1150;
      midBody.Q.value = 1.3;
      midBody.gain.value = 1.2;

const clarity = ctx.createBiquadFilter();
clarity.type = "peaking";
clarity.frequency.value = 3800;
clarity.Q.value = 1.1;
clarity.gain.value = 0.7;

const highShelf = ctx.createBiquadFilter();
highShelf.type = "highshelf";
highShelf.frequency.value = 9000;
highShelf.gain.value = 0.4;

const air = ctx.createBiquadFilter();
air.type = "highshelf";
air.frequency.value = 17000;
air.gain.value = 0.25;

const harshTamer = ctx.createBiquadFilter();
harshTamer.type = "peaking";
harshTamer.frequency.value = 5300;
harshTamer.Q.value = 4.2;
harshTamer.gain.value = -1.4;

const shimmer = ctx.createBiquadFilter();
shimmer.type = "highshelf";
shimmer.frequency.value = 16000;
shimmer.gain.value = 0.1;

return [lowShelf, subDip, lowMidCut, midBody, clarity, harshTamer, highShelf, air, shimmer];
    }
  },
};

// === INISIALISASI AUDIO GRAPH ===
function initAudio() {
  if (isInitialized) return;

  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  sourceNode = audioCtx.createMediaElementSource(audioElement);

  // EQ Nodes
eqNodes = eqFrequencies.map(freq => {
    const filter = audioCtx.createBiquadFilter();
    filter.type = "peaking";
    filter.frequency.value = freq;
    filter.Q.value = 1;
    filter.gain.value = 0;
    return filter;
  });

  // === HUBUNGKAN SLIDER DENGAN EQ NODES ===
eqFrequencies.forEach((freq, i) => {
    const slider = document.getElementById(`eq-slider-${i}`);
    if (!slider) return;

    slider.addEventListener("input", () => {
      const val = parseInt(slider.value);
      const db = (val - 50) / 5;
      if (eqNodes[i]) eqNodes[i].gain.value = db;
    });
  });

  // Gain & Compressor
  gainNode = audioCtx.createGain();
  gainNode.gain.value = 1;

  compressor = audioCtx.createDynamicsCompressor();

  // === CONNECT NODE GRAPH ===
  sourceNode.connect(eqNodes[0]);
  for (let i = 0; i < eqNodes.length - 1; i++) {
    eqNodes[i].connect(eqNodes[i + 1]);
  }
  eqNodes[eqNodes.length - 1].connect(gainNode);
  gainNode.connect(compressor);
  compressor.connect(audioCtx.destination);

  isInitialized = true;
}


// === APLIKASI PRESET ===
function applyPreset(presetName) {
  const gains = eqPresets[presetName] || eqPresets["Flat"];
  eqNodes.forEach((filter, index) => {
    filter.gain.value = gains[index];
  });

  // Gain tambahan khusus preset tertentu
  if (presetName === "Volume++") {
    gainNode.gain.value = 2.0;
  } else {
    gainNode.gain.value = 1.0;
  }
}

console.log("EQ preset applied:", presetSelect.value);

// === HANDLE DROPDOWN PRESET ===
function applyEQPreset(presetName) {
  const preset = eqPresets[presetName];
  if (!preset || !preset.eq) return;

  const sliders = eqContainer.querySelectorAll(".slider");
  preset.eq.forEach((gain, i) => {
    sliders[i].value = gain * 5 + 50;
    if (eqNodes[i]) eqNodes[i].gain.value = gain;
  });

  // Apply FX (jika ada handler-nya)
if (preset.enhancer) applyEnhancer(preset.enhancer);
if (preset.compressor) applyCompressor(preset.compressor);
if (preset.limiter) applyLimiter(preset.limiter);
if (preset.stereoWidth) setStereoWidth(preset.stereoWidth);
if (preset.reverb) applyReverb(preset.reverb);

function applyEnhancer(config) {
  console.log("applyEnhancer dipanggil dengan:", config);
  // TODO: Implementasi enhancer effect di sini
}

function applyCompressor(config) {
  console.log("applyCompressor dipanggil dengan:", config);
  // TODO: Implementasi compressor effect di sini
}

function applyLimiter(config) {
  console.log("applyLimiter dipanggil dengan:", config);
  // TODO: Implementasi limiter effect di sini
}

function setStereoWidth(value) {
  console.log("Stereo width diset ke:", value);
  // TODO: Implementasi stereo width di sini
}

function applyReverb(amount) {
  console.log("Reverb diset ke:", amount);
  // TODO: Implementasi reverb di sini
}
}

eqPresetDropdown.addEventListener("change", (e) => {
  applyEQPreset(e.target.value);
});

window.addEventListener("DOMContentLoaded", () => {
  applyEQPreset("Flat");  
});

// === TRIGGER INIT SAAT PERTAMA KALI DIKLIK / PLAY ===
document.addEventListener("click", () => {
  if (!isInitialized) {
    initAudio();

    // === Langsung pakai Volume++ dari awal ===
presetSelect.value = "Volume++";
applyEQPreset("Volume++");
  }

  if (audioCtx && audioCtx.state === "suspended") {
    audioCtx.resume();
  }
});

console.log("Preset Volume++ auto-applied");

function applyCustomFilters(preset) {
  if (!preset.filters || typeof preset.filters !== "function") return;

  const filters = preset.filters(audioCtx);
  if (!filters || !filters.length) return;

  // Sambung ke chain
  // Disconnect existing chain dulu (if needed)
  sourceNode.disconnect();

  // Rebuild chain: source ‚Üí custom filters ‚Üí eqNodes[0]...
  let lastNode = sourceNode;
  filters.forEach(filter => {
    lastNode.connect(filter);
    lastNode = filter;
  });

  // Sambung ke EQ chain
  lastNode.connect(eqNodes[0]);
}



    let lastTap = 0;

    tapArea.addEventListener("touchend", () => {
      const now = new Date().getTime();
      if (now - lastTap < 400) {
        const type = confirm("Pilih OK untuk pilih Background, Cancel untuk pilih Musik");
        fileInput.dataset.type = type ? "bg" : "musik";
        fileInput.click();
      }
      lastTap = now;
    });

    fileInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const url = URL.createObjectURL(file);

      if (fileInput.dataset.type === "bg") {
        if (file.type.includes("video")) {
          bgVideo.src = url;
          bgVideo.style.display = "block";
          bgImage.style.display = "none";
        } else if (file.type.includes("image")) {
          bgImage.src = url;
          bgImage.style.display = "block";
          bgVideo.style.display = "none";
        }
      } else {
        audio.src = url;
        audio.play();
      }
    });

    function minimizePlayer() {
      document.getElementById("player").style.display = "none";
      document.getElementById("miniPlayer").style.display = "block";
      document.getElementById("extMiniPlayer").style.display = "none";
    }

    function extMinimize() {
      document.getElementById("player").style.display = "none";
      document.getElementById("miniPlayer").style.display = "none";
      document.getElementById("extMiniPlayer").style.display = "block";
    }

    function maximizePlayer() {
      document.getElementById("player").style.display = "flex";
      document.getElementById("miniPlayer").style.display = "none";
      document.getElementById("extMiniPlayer").style.display = "none";
    }

    function playAudio() {
      audio.play();
    }
    
       function enterFullscreenOnce() {
      const docElm = document.documentElement;
      if (docElm.requestFullscreen) docElm.requestFullscreen();
      else if (docElm.webkitRequestFullscreen) docElm.webkitRequestFullscreen();
      else if (docElm.mozRequestFullScreen) docElm.mozRequestFullScreen();
      else if (docElm.msRequestFullscreen) docElm.msRequestFullscreen();
    }

    // Jaga tetap fullscreen
    document.addEventListener("fullscreenchange", () => {
      if (!document.fullscreenElement) {
        setTimeout(() => {
          enterFullscreenOnce();
        }, 300);
      }
    });

    // Hanya aktif saat interaksi
    document.addEventListener("click", () => {
      enterFullscreenOnce();
    }, { once: true });
    
  if ('serviceWorker' in navigator) {    
    navigator.serviceWorker.register('sw.js')    
      .then(reg => console.log('‚úÖ Service Worker registered:', reg.scope))    
      .catch(err => console.error('‚ùå Service Worker registration failed:', err));    
  }    

console.log("‚úÖ Script Loaded");
  </script>

</body>
</html>
