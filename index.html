<!DOCTYPE html>            
<html lang="id">            
<head>            
  <meta charset="UTF-8" />            
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">            
<!-- Web App Manifest -->            
<link rel="manifest" href="manifest.json" />            
            
<!-- App Icons -->            
<link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192.png" />            
<link rel="icon" type="image/png" sizes="512x512" href="assets/icon-512.png" />            
            
<!-- Android Theme -->            
<meta name="theme-color" content="#000000" />            
<meta name="mobile-web-app-capable" content="yes" />            
            
<!-- iOS support -->            
<meta name="apple-mobile-web-app-capable" content="yes" />            
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />              
<meta name="color-scheme" content="dark light">    
<link rel="apple-touch-icon" href="assets/icon-192.png" />            
<link rel="apple-touch-startup-image" href="assets/splash-screen.png">        
  <meta name="apple-mobile-web-app-title" content="MediaPlayer" />
  <title>Hybrid MP3/MP4 Player</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    video, audio {
      width: 90%;
      max-width: 500px;
      margin-top: 20px;
      display: none;
      border-radius: 16px;
      box-shadow: 0 0 12px #0ff4;
    }
    .controls {
      margin-top: 10px;
      display: flex;
      gap: 20px;
      justify-content: center;
      align-items: center;
    }
    button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
    }
    select {
      margin-top: 15px;
      padding: 6px 12px;
      border-radius: 6px;
      background: #222;
      color: white;
    }
    input[type="file"] {
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <h2>üéß Hybrid Player</h2>

  <!-- Mode Switch -->
  <select id="modeSelect">
    <option value="audio">üéµ Mode Audio (MP3)</option>
    <option value="video">üé• Mode Video (MP4)</option>
  </select>

  <!-- Pemutar Audio & Video -->
  <audio id="audioPlayer" controls></audio>
  <video id="videoPlayer" controls muted loop></video>

  <!-- Kontrol Tombol SVG -->
  <div class="controls">
    <button id="prevBtn">‚èÆÔ∏è</button>
    <button id="playBtn">‚ñ∂Ô∏è</button>
    <button id="pauseBtn">‚è∏Ô∏è</button>
    <button id="nextBtn">‚è≠Ô∏è</button>
  </div>

  <!-- Input Pilih File -->
  <input type="file" id="filePicker" accept="audio/*,video/*" multiple />

<button id="installBtn" style="display: none;">Install App</button>
  <script>
    const modeSelect = document.getElementById("modeSelect");
    const audioPlayer = document.getElementById("audioPlayer");
    const videoPlayer = document.getElementById("videoPlayer");
    const filePicker = document.getElementById("filePicker");

    const playBtn = document.getElementById("playBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let files = [];
    let currentIndex = 0;
    let mode = "audio";

    // Ganti mode audio/video
    modeSelect.addEventListener("change", () => {
      mode = modeSelect.value;
      audioPlayer.style.display = mode === "audio" ? "block" : "none";
      videoPlayer.style.display = mode === "video" ? "block" : "none";
      loadCurrent();
    });

    filePicker.addEventListener("change", (e) => {
      files = Array.from(e.target.files);
      currentIndex = 0;
      loadCurrent();
    });

    function loadCurrent() {
      const file = files[currentIndex];
      if (!file) return;

      const url = URL.createObjectURL(file);

      if (mode === "audio" && file.type.startsWith("audio")) {
        audioPlayer.src = url;
        audioPlayer.play();
        audioPlayer.style.display = "block";
        videoPlayer.style.display = "none";
      } else if (mode === "video" && file.type.startsWith("video")) {
        videoPlayer.src = url;
        videoPlayer.play();
        videoPlayer.style.display = "block";
        audioPlayer.style.display = "none";
      }
    }

    playBtn.addEventListener("click", () => {
      if (mode === "audio") audioPlayer.play();
      else videoPlayer.play();
    });

    pauseBtn.addEventListener("click", () => {
      if (mode === "audio") audioPlayer.pause();
      else videoPlayer.pause();
    });

    prevBtn.addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + files.length) % files.length;
      loadCurrent();
    });

    nextBtn.addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % files.length;
      loadCurrent();
    });
    
    
    
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'block';

    installBtn.addEventListener('click', () => {
      installBtn.style.display = 'none';
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the A2HS prompt');
        } else {
          console.log('User dismissed the A2HS prompt');
        }
        deferredPrompt = null;
      });
    });
  });

    
    
  if ('serviceWorker' in navigator) {    
    navigator.serviceWorker.register('sw.js')    
      .then(reg => console.log('‚úÖ Service Worker registered:', reg.scope))    
      .catch(err => console.error('‚ùå Service Worker registration failed:', err));    
  }    
  
  
  </script>
</body>
</html>
